<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ejemplo Firebase</title>
</head>
<body>
  <h1>Base de Datos en Firebase</h1>

  <ul id="lista"></ul>

  <input id="nombre" placeholder="Nombre">
  <input id="edad" type="number" placeholder="Edad">
  <button onclick="agregar()">Agregar</button>

  <script type="module">
    // âœ… Importar Firebase desde la CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } 
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ðŸ”¹ ConfiguraciÃ³n de tu proyecto Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDzTy1A7HdNUO-K0pO0vMt8OznE8Xyhnk4",
      authDomain: "pruebadatabase-fd80b.firebaseapp.com",
      projectId: "pruebadatabase-fd80b",
      storageBucket: "pruebadatabase-fd80b.firebasestorage.app",
      messagingSenderId: "151626846066",
      appId: "1:151626846066:web:47e9996c60a0146a1e57eb",
      measurementId: "G-GPEK9EV9V1"
    };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const lista = document.getElementById("lista");

    // ðŸ”¹ Cargar datos
    async function cargar() {
      lista.innerHTML = "";
      const querySnapshot = await getDocs(collection(db, "personas"));
      querySnapshot.forEach(docu => {
        const data = docu.data();
        lista.innerHTML += `<li>${data.nombre} (${data.edad}) 
          <button onclick="borrar('${docu.id}')">X</button>
        </li>`;
      });
    }

    // ðŸ”¹ Agregar persona
    async function agregar() {
      let nombre = document.getElementById("nombre").value;
      let edad = document.getElementById("edad").value;
      await addDoc(collection(db, "personas"), { nombre, edad });
      cargar();
    }

    // ðŸ”¹ Borrar persona
    async function borrar(id) {
      await deleteDoc(doc(db, "personas", id));
      cargar();
    }

    // Hacer funciones accesibles desde el HTML
    window.agregar = agregar;
    window.borrar = borrar;

    // Cargar al inicio
    cargar();
  </script>
</body>
</html>
